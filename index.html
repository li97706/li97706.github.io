<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-shell" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/02/shell/" class="article-date">
  <time class="dt-published" datetime="2024-12-02T14:47:10.486Z" itemprop="datePublished">2024-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一：变量和语句"><a href="#一：变量和语句" class="headerlink" title="一：变量和语句"></a>一：变量和语句</h1><h2 id="1-变量"><a href="#1-变量" class="headerlink" title="1.变量"></a>1.变量</h2><p>数据类型：整型，浮点，字符串，数组，哈希</p>
<p>变量：直接赋值使用（等号两边不能有空格，有特殊字符要加引号）</p>
<p>输出变量使用$str</p>
<p>zsh字符数组开头是1，结尾-1</p>
<p>&amp;&amp;后面语句只在前面语句为真时执行</p>
<p>变量比较都要加上空格</p>
<h2 id="2-语句"><a href="#2-语句" class="headerlink" title="2.语句"></a>2.语句</h2><p>语句：if,for,while,repeat,until,<strong>select</strong>,case</p>
<p>语句尽量都加上空格</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if [[ $str == abc ]]</span><br><span class="line"></span><br><span class="line">then</span><br><span class="line"></span><br><span class="line">echo good</span><br><span class="line"></span><br><span class="line">elif [[ $str ==a ]]</span><br><span class="line"></span><br><span class="line">then</span><br><span class="line"></span><br><span class="line">echo t</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">echo bad</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (( i=1;i&lt;$#str;i++ ))</span><br><span class="line">do</span><br><span class="line">echo $str[i]</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while (( 1 ))</span><br><span class="line">do</span><br><span class="line">echo i</span><br><span class="line">break</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repeat 10 &#123;</span><br><span class="line">echo lxy</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">条件不满足时执行</span></span><br><span class="line">until (( $i &gt; 3 )) &#123;</span><br><span class="line">echo $i</span><br><span class="line">(( i++ ))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select o (aa bb cc) &#123;</span><br><span class="line">echo $o</span><br><span class="line">break</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="keyword">select</span>如果不<span class="built_in">break</span>会循环让用户选择</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">case $y in</span><br><span class="line">a)</span><br><span class="line">echo 1;&amp;</span><br><span class="line">b)</span><br><span class="line">echo 2;;</span><br><span class="line">c)</span><br><span class="line">echo 4;;</span><br><span class="line">*)</span><br><span class="line">echo error</span><br><span class="line">esac</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">;;结束语句  ;&amp;不匹配执行下一个   ;|往下是否有满足条件的分支</span></span><br></pre></td></tr></table></figure>

<h1 id="二：字符串"><a href="#二：字符串" class="headerlink" title="二：字符串"></a>二：字符串</h1><h2 id="字符串长度："><a href="#字符串长度：" class="headerlink" title="字符串长度："></a>字符串长度：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $#str</span><br></pre></td></tr></table></figure>

<h2 id="字符串拼接："><a href="#字符串拼接：" class="headerlink" title="字符串拼接："></a>字符串拼接：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $str1$str2</span><br></pre></td></tr></table></figure>

<h2 id="字符串切片"><a href="#字符串切片" class="headerlink" title="字符串切片"></a>字符串切片</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $str[1,2]</span><br></pre></td></tr></table></figure>

<h2 id="字符串截取"><a href="#字符串截取" class="headerlink" title="字符串截取"></a>字符串截取</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">截取规则：	<span class="comment">#左边匹配，%右边匹配，*在那边就删那边内容</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">最小匹配左边</span></span><br><span class="line">echo $&#123;str#*a&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">最大匹配左边</span></span><br><span class="line">echo $&#123;str##*a&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">最小匹配右边</span></span><br><span class="line">echo $&#123;str%%d*&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">最大匹配右边</span></span><br><span class="line">echo $&#123;str%d*&#125;</span><br></pre></td></tr></table></figure>

<h2 id="遍历字符"><a href="#遍历字符" class="headerlink" title="遍历字符"></a>遍历字符</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str2=abcd</span><br><span class="line">for (( i=1;i&lt;=$#str2;i++ ))</span><br><span class="line">do</span><br><span class="line">echo $str2[i]</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="字符串删除和替换"><a href="#字符串删除和替换" class="headerlink" title="字符串删除和替换"></a>字符串删除和替换</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      /替换第一个       //替换全部      删除是让替换的为空</span></span><br><span class="line">echo $&#123;str/a/d&#125;</span><br><span class="line">echo $&#123;str//a//d&#125;</span><br><span class="line">echo $&#123;str//bc&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  按位置删除,让位置索引元素为空</span></span><br><span class="line">str[2,4]=</span><br><span class="line">echo $str</span><br></pre></td></tr></table></figure>

<h2 id="判断变量是否存在"><a href="#判断变量是否存在" class="headerlink" title="判断变量是否存在"></a>判断变量是否存在</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   (( $+val值 ))    ，用[[]]无法区分变量是undefined还是null</span></span><br><span class="line">（（ $+str )) &amp;&amp; echo good</span><br></pre></td></tr></table></figure>

<h2 id="字符串匹配"><a href="#字符串匹配" class="headerlink" title="字符串匹配"></a>字符串匹配</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意*号要在外面</span></span><br><span class="line">[[ $str1 ==  *$str2*]] &amp;&amp; echo good</span><br></pre></td></tr></table></figure>

<h2 id="目录文件截取"><a href="#目录文件截取" class="headerlink" title="目录文件截取"></a>目录文件截取</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> h是目录名    t是文件名     e是文件拓展名   r是去掉拓展名的路径  A：相对路径转绝对路径</span></span><br><span class="line">filepath=/a/b/c.x</span><br><span class="line">echo $&#123;filepath:h&#125;</span><br><span class="line"></span><br><span class="line">filepath1=a.txt</span><br><span class="line">echo $&#123;filepath1:A&#125;</span><br></pre></td></tr></table></figure>

<h2 id="字符串分隔"><a href="#字符串分隔" class="headerlink" title="字符串分隔"></a>字符串分隔</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">字符串先转换为数组</span></span><br><span class="line">str=&quot;a,b,c&quot;</span><br><span class="line">arr=($&#123;(s/,/)str&#125;)#数组的基础上()对字符进行操作$&#123;&#125;，加上变量修饰符（s/，/）</span><br><span class="line">for (( i=1;i&lt;$#str;i++ ))</span><br><span class="line">do</span><br><span class="line">echo $arr[i]</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="读取文件内容到字符串"><a href="#读取文件内容到字符串" class="headerlink" title="读取文件内容到字符串"></a>读取文件内容到字符串</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;$(&lt;c.txt)[(f)3]&#125;#读取指定文件第3行，在读取基础上[]使用修饰符（f）然后$&#123;&#125;再次读取</span><br><span class="line">echo $(&lt;c.txt)#读取c.txt文件</span><br></pre></td></tr></table></figure>

<h2 id="读取进程输出到字符串"><a href="#读取进程输出到字符串" class="headerlink" title="读取进程输出到字符串"></a>读取进程输出到字符串</h2><p>读取进程的输出到字符串，指的是将某个命令或进程在终端上的输出结果捕获并存储在一个变量中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str=$(ls)</span><br><span class="line"></span><br><span class="line">echo $str</span><br></pre></td></tr></table></figure>

<h2 id="print命令"><a href="#print命令" class="headerlink" title="print命令"></a>print命令</h2><p>-l 换行输出</p>
<p>-n 禁止自动换行</p>
<p>-m 只输出匹配到的字符串</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print -m &quot;a*&quot; ab aacd b c d</span><br></pre></td></tr></table></figure>

<h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>*任意数量</p>
<p>？任意一个</p>
<p>[abcd] abcd中任意一个</p>
<p>&lt;-&gt;0和任意正整数</p>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="数组定义：小括号内直接赋值使用"><a href="#数组定义：小括号内直接赋值使用" class="headerlink" title="数组定义：小括号内直接赋值使用"></a>数组定义：小括号内直接赋值使用</h2><h2 id="数组拼接："><a href="#数组拼接：" class="headerlink" title="数组拼接："></a>数组拼接：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array2+=($array1)  #小括号不能省略，要不会转成一个字符串</span><br></pre></td></tr></table></figure>

<h2 id="变量修饰语：小写o升序，大写O降序，加i大小写不敏感，u去除重复元素"><a href="#变量修饰语：小写o升序，大写O降序，加i大小写不敏感，u去除重复元素" class="headerlink" title="变量修饰语：小写o升序，大写O降序，加i大小写不敏感，u去除重复元素"></a>变量修饰语：小写o升序，大写O降序，加i大小写不敏感，u去除重复元素</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;(oi)array&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="构造数组"><a href="#构造数组" class="headerlink" title="构造数组"></a>构造数组</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用连续字符数值构造数组&#123;1..10&#125;&#123;a,b,c&#125;</span></span><br><span class="line">array=(aa&#123;1..3&#125;) &amp;&amp; <span class="built_in">echo</span> <span class="variable">$array</span>#会将前后元素都展开</span><br><span class="line">array=(aa&#123;15..19..2&#125;) &amp;&amp; <span class="built_in">echo</span> <span class="variable">$array</span>#第二个 .. 后的数字是展开的间隔</span><br><span class="line"><span class="comment">#字符串构造数组，使用(s:/:)指定分隔符</span></span><br><span class="line">array=(<span class="variable">$&#123;(s:\n:)str&#125;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="数组的交集差集"><a href="#数组的交集差集" class="headerlink" title="数组的交集差集"></a>数组的交集差集</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#   ：*交集输出两个数组都有的元素       ：|输出arr1有而arr2没有的元素</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array1:*array2&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array1:|array2&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="数组交叉合并"><a href="#数组交叉合并" class="headerlink" title="数组交叉合并"></a>数组交叉合并</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从 array1 取一个，再从 array2 取一个，以此类推，一个数组取完了就结束</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array1:^array2&#125;</span></span><br><span class="line"><span class="comment"># 如果用 :^^，只有一个数组取完了的话，继续从头取，直到第二个数组也取完了</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array1:^^array2&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h1><h2 id="哈希表要提前定义"><a href="#哈希表要提前定义" class="headerlink" title="哈希表要提前定义"></a>哈希表要提前定义</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#两个都是定义哈希表</span></span><br><span class="line"><span class="built_in">typeset</span> -A table</span><br><span class="line"><span class="built_in">local</span> -A table</span><br><span class="line"><span class="comment">#直接echo只能输出值，哈希表大小是键值对的数量</span></span><br><span class="line"><span class="comment">#同时输出键值对</span></span><br><span class="line">table=(k1 v1 k2 v2)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;(kv)table&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$table</span>[k1]</span><br></pre></td></tr></table></figure>

<h2 id="哈希表拼接和数组是一样的，（）里面"><a href="#哈希表拼接和数组是一样的，（）里面" class="headerlink" title="哈希表拼接和数组是一样的，（）里面${}"></a>哈希表拼接和数组是一样的，（）里面${}</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table1+=(<span class="variable">$&#123;(kv)table2&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>哈希表大部分都是使用${}</p>
<h1 id="数值计算"><a href="#数值计算" class="headerlink" title="数值计算"></a>数值计算</h1><p>使用 （（   ））</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $(( 1+2 ))</span><br></pre></td></tr></table></figure>

<p>加载库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zmodload -i zsh/mathfunc</span><br></pre></td></tr></table></figure>

<h1 id="函数和脚本"><a href="#函数和脚本" class="headerlink" title="函数和脚本"></a>函数和脚本</h1><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fun</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$1</span> <span class="variable">$2</span> <span class="variable">$3</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$#</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#函数可以有参数，但 zsh 中无需显式注明有几个参数，直接读取即可。</span></span><br><span class="line">fun aa bb cc</span><br><span class="line">aa bb cc</span><br><span class="line">3</span><br><span class="line"><span class="comment">#shell里return是结束，返回值用echo/print直接输出就是返回</span></span><br></pre></td></tr></table></figure>

<h2 id="用-getopts-命令处理命令行选项"><a href="#用-getopts-命令处理命令行选项" class="headerlink" title="用 getopts 命令处理命令行选项"></a>用 getopts 命令处理命令行选项</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">getopts</span>后面参数带引号的命令行必须写参数，OPTARG是命令行传输来的参数值，\r是无效参数，：是没传参数提示信息，opt是存储的是<span class="built_in">getopts</span>后面的参数</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env zsh</span></span><br><span class="line">while getopts a:bc: opt</span><br><span class="line">do</span><br><span class="line">case $opt in</span><br><span class="line">a)</span><br><span class="line">echo a;;</span><br><span class="line">b)</span><br><span class="line">echo b;;</span><br><span class="line">c)</span><br><span class="line">echo c;;</span><br><span class="line">\?)</span><br><span class="line">echo error;;</span><br><span class="line">esac</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行</span></span><br><span class="line">./r.sh -a -b ccc -c</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">注意点--&gt;1.<span class="built_in">getopts</span>不是条件不要+(( )),2.传递选项使用-a,3.<span class="keyword">case</span>语法要熟悉</span></span><br></pre></td></tr></table></figure>

<h1 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h1><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#列出 /usr/bin 目录下以 zsh 开头的文件。</span></span><br><span class="line"><span class="built_in">print</span> -l /usr/bin/env zsh*</span><br><span class="line"><span class="comment">#列出当前目录及子目录中的所有普通文件</span></span><br><span class="line"><span class="built_in">print</span> -l **/*(.)</span><br><span class="line"><span class="comment">#列出最近一天修改过内容的文件</span></span><br><span class="line"><span class="built_in">print</span> -l *(.m-1)#m 后边可加单位，如果没有单位，默认是天。其他单位：M（月）、w（周）、h（小时）、m（分钟）、s（秒）。+ 是指定时间之前，- 是指定时间之内。</span><br></pre></td></tr></table></figure>

<h1 id="管道符和重定向和文件读写"><a href="#管道符和重定向和文件读写" class="headerlink" title="管道符和重定向和文件读写"></a>管道符和重定向和文件读写</h1><p>|一个程序的输出作为另一个程序的输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">左边生成输出数据，右边接受数据</span></span><br><span class="line">ll|grep &quot;.txt&quot;</span><br></pre></td></tr></table></figure>

<p>重定向&gt;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo good &gt;0.txt &gt;1.txt &gt;2.txt</span><br><span class="line">echo bad &gt;&gt;0.txt &gt;&gt;1.txt &gt;&gt;2.txt#追加数据</span><br></pre></td></tr></table></figure>

<p>删除文件</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#f 参数代表即使文件不存在也不报错</span></span><br><span class="line"><span class="built_in">rm</span> -f test1.txt test2.txt</span><br></pre></td></tr></table></figure>

<p>清空文件</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n &gt;test.txt</span><br></pre></td></tr></table></figure>

<p>读文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $(&lt;c.txt)</span><br></pre></td></tr></table></figure>

<p>多行文本写入</p>
<p>字符串拼接后一次写入，或者直接把数组写入文件</p>
<h1 id="进程和作业控制"><a href="#进程和作业控制" class="headerlink" title="进程和作业控制"></a>进程和作业控制</h1><p>小括号的代码是在子进程中执行的</p>
<p>要在后台进程执行shell命令只要在shell命令后面加一个&amp;</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="built_in">sleep</span> 1000 &amp;&amp; <span class="built_in">echo</span> aa&#125; &amp;</span><br></pre></td></tr></table></figure>

<h1 id="alias和eval"><a href="#alias和eval" class="headerlink" title="alias和eval"></a>alias和eval</h1><p>alias:起别名</p>
<p>alias  别名&#x3D;shell命令（要放行首，不放行首要加上选项g全局解析）</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -l&#x27;</span></span><br></pre></td></tr></table></figure>

<p>eval类似指针，会两次解析参数，首先解析传入的字符串，然后将结果再次解析并执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">varname=&quot;foo&quot;</span><br><span class="line">eval $varname=&quot;bar&quot;</span><br><span class="line">echo $foo</span><br></pre></td></tr></table></figure>

<p>zsh里要使用eval功能的话使用变量修饰符P</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1=str2</span><br><span class="line">str2=abc</span><br><span class="line">echo $&#123;(P)str1&#125;</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>

<h1 id="socket实现进程通信"><a href="#socket实现进程通信" class="headerlink" title="socket实现进程通信"></a>socket实现进程通信</h1><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听连接端</span></span><br><span class="line"><span class="comment"># 首先要加载 socket 模块</span></span><br><span class="line">% <span class="built_in">zmodload</span> zsh/net/socket</span><br><span class="line"></span><br><span class="line">% <span class="built_in">zsocket</span> -l test.sock</span><br><span class="line">% listenfd=<span class="variable">$REPLY</span></span><br><span class="line"><span class="comment"># 此处阻塞等待连接</span></span><br><span class="line">% <span class="built_in">zsocket</span> -a <span class="variable">$listenfd</span></span><br><span class="line"><span class="comment"># 连接建立完成</span></span><br><span class="line">% fd=<span class="variable">$REPLY</span></span><br><span class="line">% <span class="built_in">echo</span> <span class="variable">$fd</span></span><br><span class="line">5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后 $fd 就可读可写</span></span><br><span class="line">% <span class="built_in">cat</span> &lt;&amp;<span class="variable">$fd</span></span><br><span class="line">good</span><br></pre></td></tr></table></figure>

<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发起连接端</span></span><br><span class="line"><span class="comment"># 首先要加载 socket 模块</span></span><br><span class="line">% <span class="built_in">zmodload</span> zsh/net/socket</span><br><span class="line"></span><br><span class="line">% <span class="built_in">zsocket</span> test.sock</span><br><span class="line"><span class="comment"># 连接建立完成</span></span><br><span class="line">% fd=<span class="variable">$REPLY</span></span><br><span class="line">% <span class="built_in">echo</span> <span class="variable">$fd</span></span><br><span class="line">4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后 $fd 就可读可写</span></span><br><span class="line">% <span class="built_in">echo</span> good &gt;&amp;<span class="variable">$fd</span></span><br></pre></td></tr></table></figure>

<p>关闭连接：</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发起连接端</span></span><br><span class="line"><span class="comment"># fd 是之前存放 fd 号的变量，不需要加 $</span></span><br><span class="line">% <span class="built_in">exec</span> &#123;fd&#125;&gt;&amp;-</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听连接端</span></span><br><span class="line">% <span class="built_in">exec</span> &#123;listenfd&#125;&gt;&amp;-</span><br><span class="line">% <span class="built_in">exec</span> &#123;fd&#125;&gt;&amp;-</span><br><span class="line"><span class="comment"># 删除 socket 文件即可，如果下次再使用会重新创建，该文件不能重复使用</span></span><br><span class="line">% <span class="built_in">rm</span> test.sock</span><br></pre></td></tr></table></figure>

<h1 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h1><p>文件形态——-文件拥有者权限u——-隶属组权限g——–其他身份的权限o</p>
<p>读取r：4；写入w：2；执行read：1</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 test.sh   给用户加上rwx权限，用户组rx，其他rx</span><br><span class="line">chmod +x test。sh   给所有者加上x权限</span><br><span class="line">chmod u+X test.sh    只给文件拥有者加上执行权</span><br></pre></td></tr></table></figure>

<p>系统默认开启的文件</p>
<p>stdin（0）  stdout（1） stderror（2）</p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export test#export 设置为全局变量</span><br><span class="line">readonly -r p #只读变量，不能在修改p的值</span><br></pre></td></tr></table></figure>

<h1 id="bash-Shell"><a href="#bash-Shell" class="headerlink" title="bash Shell"></a>bash Shell</h1><p>获取字符串长度：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;#str&#125;</span></span><br></pre></td></tr></table></figure>

<p>字符串切片：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;str:1:2&#125;#切片留1到2元素</span><br><span class="line">echo $&#123;str:1&#125;#第1个元素到最后元素</span><br></pre></td></tr></table></figure>

<p>大小写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 转为大写</span></span><br><span class="line"><span class="variable">$&#123;varname^^&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转为小写</span></span><br><span class="line"><span class="variable">$&#123;varname,,&#125;</span></span><br></pre></td></tr></table></figure>

<p>操作历史</p>
<p>history：显示最近操作历史</p>
<p>！+行号执行行号命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">history</span><br><span class="line"></span><br><span class="line">！1</span><br></pre></td></tr></table></figure>

<p>目录堆栈</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pushd进入堆</span><br><span class="line"></span><br><span class="line">popd退出堆</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/02/shell/" data-id="cm475rbb10001q0ti2fj68179" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Hello，Hexo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/02/Hello%EF%BC%8CHexo/" class="article-date">
  <time class="dt-published" datetime="2024-12-02T14:22:23.147Z" itemprop="datePublished">2024-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Hello，Hexo"><a href="#Hello，Hexo" class="headerlink" title="Hello，Hexo"></a>Hello，Hexo</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/02/Hello%EF%BC%8CHexo/" data-id="cm475rbav0000q0tiemrxg1tq" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/12/02/shell/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/12/02/Hello%EF%BC%8CHexo/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>